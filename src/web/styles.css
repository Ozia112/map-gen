* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body { background: #1a1a1a; color: #fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif; }

.topbar { display: flex; gap: 24px; align-items: center; padding: 12px 18px; border-bottom: 1px solid #2a2a2a; position: sticky; top: 0; background: #1a1a1a; z-index: 10; }
.topbar .group { display: inline-flex; align-items: center; gap: 8px; }
.topbar .label { color: #ddd; font-size: 14px; }
.btn, .toggle, .icon, .text { background: #2a2a2a; color: #fff; border: 1px solid #444; border-radius: 6px; height: 32px; padding: 0 12px; cursor: pointer; }
.btn:hover, .toggle:hover, .icon:hover { background: #353535; }
.icon { width: 32px; padding: 0; text-align: center; font-weight: 600; }
.text { width: 120px; }
.swatch { width: 28px; height: 28px; border-radius: 6px; border: 1px solid #444; display: inline-block; background: #ff7825; }

.layout { display: grid; grid-template-columns: 1fr 360px; gap: 24px; padding: 18px; height: calc(100vh - 58px); }
.viewport { position: relative; background: #111; border: 1px solid #2a2a2a; border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.viewport img { max-width: 100%; max-height: 100%; object-fit: contain; background: #000; }

/* Loader bottom-left */
.loading { position: absolute; left: 16px; bottom: 16px; display: inline-flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); padding: 8px 12px; border: 1px solid #333; border-radius: 8px; }
.hidden { display: none; }
.spinner { width: 16px; height: 16px; border: 2px solid #ffb891; border-top-color: #ff7825; border-radius: 50%; animation: spin 0.9s linear infinite; }
.txt { color: #ddd; font-size: 12px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Mock-like checkboxes */
.chk { display: none; }
.chkbox { width: 24px; height: 24px; display: inline-block; border-radius: 6px; border: 2px solid #555; background: #2a2a2a; position: relative; cursor: pointer; }
.chkbox::after { content: ''; position: absolute; width: 14px; height: 14px; top: 3px; left: 3px; border-radius: 4px; background: transparent; transition: background 120ms ease; }
.chk:checked + .chkbox { border-color: #ffb891; }
.chk:checked + .chkbox::after { background: #ff7825; }

.panel { padding: 12px; border: 1px solid #2a2a2a; border-radius: 8px; background: #111; overflow: auto; }
.section { margin-bottom: 18px; }
.section .title { font-weight: 600; }
.section label { display: flex; justify-content: space-between; margin: 8px 0 6px; color: #ddd; }
.section .val { color: #aaa; }
.section input[type=range] { width: 100%; appearance: none; height: 6px; border-radius: 4px; background: #3a3a3a; outline: none; }
.section input[type=range]::-webkit-slider-thumb { appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #ff7825; border: 1px solid #ffb891; }
.section input[type=range]::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: #ff7825; border: 1px solid #ffb891; }

.readouts { color: #ddd; display: grid; gap: 6px; margin-top: 8px; }

/* Rotación: número + slider */
.control { display: grid; grid-template-columns: 90px 90px 1fr; align-items: center; gap: 8px; margin: 10px 0; }
.control label { margin: 0; color: #ddd; }
.num { width: 90px; height: 32px; border: 1px solid #444; border-radius: 6px; background: #2a2a2a; color: #fff; padding: 0 8px; }

/* Rows and alignment */
.row { display: inline-flex; gap: 10px; align-items: center; }
.between { justify-content: space-between; width: 100%; display: inline-flex; }

/* Overlay and Options Panel */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.55); z-index: 50; }
.opt-panel { position: fixed; left: auto; right: auto; top: 76px; width: 320px; max-width: calc(100% - 48px); background: #111; border: 1px solid #2a2a2a; border-radius: 10px; z-index: 60; box-shadow: 0 10px 24px rgba(0,0,0,0.5); }
.opt-panel.hidden, .overlay.hidden { display: none; }
.opt-header { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #2a2a2a; }
.opt-body { padding: 12px; }
.grid-opts label { margin-top: 10px; }

/* Side tab for options */
.side-tab {
	position: fixed;
	left: 8px; /* Will be updated by JS to align with sidebar's left edge */
	top: 120px; /* Will be updated by JS */
	transform: rotate(-90deg);
	transform-origin: top left;
	background: #2a2a2a; color: #fff; border: 1px solid #444; border-radius: 6px;
	padding: 8px 12px; z-index: 55; cursor: pointer;
}

/* Export modal (mock-like) */
.export-panel { position: fixed; left: 24px; top: 72px; width: 360px; background: #2a2a2a; border: 1px solid #444; border-radius: 10px; z-index: 70; box-shadow: 0 8px 20px rgba(0,0,0,0.55); color: #ddd; }
.export-panel.hidden { display: none; }
.export-panel .exp-header { font-weight: 600; padding: 10px 12px; border-bottom: 1px solid #3a3a3a; color: #ddd; display:flex; align-items:center; justify-content:space-between; }
.export-panel .exp-body { padding: 12px; }
.exp-label { color: #ddd; margin-right: 8px; }
.exp-path { width: 220px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.format-toggle { display: inline-flex; gap: 8px; }
.format-toggle .toggle { height: 32px; }
.format-toggle .toggle.active { background: #ff7825; border-color: #ffb891; }
.path-row .btn { padding: 0 10px; }
.exp-close { background:#2a2a2a; border:1px solid #444; border-radius:6px; }
/* Disabled look for scale when SVG */
.text:disabled { opacity: 0.5; cursor: not-allowed; }

/* Toast notifications */
.toast { position: fixed; right: 20px; bottom: 20px; background: rgba(0,0,0,0.8); color: #eee; border: 1px solid #444; padding: 10px 14px; border-radius: 8px; z-index: 100; max-width: 60vw; }
.toast.error { border-color: #a33; color: #ffd7d7; }
.toast.success { border-color: #2f6; color: #dfffe0; }
